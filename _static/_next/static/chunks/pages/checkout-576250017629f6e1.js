(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{6302:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return t(6711)}])},2707:function(e,r,t){"use strict";var n=t(5893),s=t(6294),a={display:"block",margin:"0 auto",borderColor:"red"};r.Z=function(e){var r=e.load;return(0,n.jsx)(s.Z,{color:"#368ED7",loading:r,css:a,size:10,margin:2})}},6711:function(e,r,t){"use strict";t.r(r);var n=t(4051),s=t.n(n),a=t(5893),l=t(7294),i=t(1664),c=t.n(i),d=t(5675),o=t.n(d),u=t(3667),m=t(2067),f=t(2707),p=t(2175),x=t(6501),h=t(1124),N=t(6974),v=t(4231);function j(e,r,t,n,s,a,l){try{var i=e[a](l),c=i.value}catch(d){return void t(d)}i.done?r(c):Promise.resolve(c).then(n,s)}function b(e){return function(){var r=this,t=arguments;return new Promise((function(n,s){var a=e.apply(r,t);function l(e){j(a,n,s,l,i,"next",e)}function i(e){j(a,n,s,l,i,"throw",e)}l(void 0)}))}}var g=v.Ry().shape({email:v.Z_().email("Invalid email").required("Required"),number:v.Z_().required("Required"),firstName:v.Z_().min(2,"Too Short!").max(50,"Too Long!").required("Required"),lastName:v.Z_().min(2,"Too Short!").max(50,"Too Long!").required("Required"),address:v.Z_().required("Required"),city:v.Z_().required("Required")});r.default=function(){var e=(0,l.useState)([]),r=e[0],t=e[1],n=(0,l.useState)(!1),i=n[0],d=n[1],v=(0,l.useState)({email:"",number:"",firstName:"",lastName:"",address:"",city:"",postal:""}),j=v[0],w=v[1],y=(0,l.useContext)(h.A),_=y.cart,k=y.clearCart,q=(0,N.jl)(),P=function(){var e=b(s().mark((function e(){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,Promise.all(null===_||void 0===_?void 0:_.map((function(e){return(0,m.wv)(e.productId)})));case 3:(r=e.sent)&&(n=[],_.map((function(e){return n.push({id:e.id,productId:e.productId,name:r.find((function(r){return r._id===e.productId})).clothName,code:r.find((function(r){return r._id===e.productId})).clothCode,size:e.size,qty:e.quantity,price:r.find((function(r){return r._id===e.productId})).price||0})})),t(n)),d(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=b(s().mark((function e(n){var a,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.length){e.next=4;break}x.ZP.error("No items in cart!"),e.next=24;break;case 4:if(q){e.next=8;break}x.ZP.error("You have to log in!"),e.next=24;break;case 8:return a=[],r.map((function(e){return a.push({productName:e.name,productId:e.id,quantity:e.qty,netPrice:e.qty*e.price})})),l={customerId:n.id,totalCost:(s=a,s.reduce((function(e,r){return e+parseInt(r.netPrice)}),0)),status:"pending",productDetails:a},e.prev=11,e.next=14,(0,m.dN)(l);case 14:x.ZP.success("Order made successfully!"),localStorage.removeItem("cart"),t([]),k(),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(11),x.ZP.error("Soemthing went wrong!"),console.log(e.t0);case 24:case"end":return e.stop()}var s}),e,null,[[11,20]])})));return function(r){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){_&&P()}),[_]),(0,l.useEffect)((function(){var e=(0,N.v0)();e&&w({email:e.email,number:e.phone,firstName:e.firstName,lastName:e.lastName,address:e.address,city:e.city,id:e._id})}),[]),(0,a.jsx)(p.J9,{initialValues:j,enableReinitialize:!0,validationSchema:g,onSubmit:function(e){Z(e)},children:function(e){e.values;var t=e.errors,n=e.touched,s=e.isSubmitting;return(0,a.jsx)(p.l0,{children:(0,a.jsxs)("div",{className:"relative w-full max-w-screen-xl px-5 py-3 mx-auto mt-20 md:py-5 md:px-20 xl:px-0 lg:mt-28 xl:mt-12",children:[(0,a.jsx)(x.x7,{}),(0,a.jsx)("h5",{className:"text-xl font-bold",children:"Shipping and Payment"}),(0,a.jsxs)("div",{className:"grid gap-1 mt-6 lg:grid-cols-4",children:[(0,a.jsxs)("div",{className:"lg:col-span-3 lg:pr-20",children:[(0,a.jsx)("p",{children:"Shipping information"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(p.gN,{placeholder:"Email",className:"w-full px-4 py-2 border rounded-full focus:outline-none",name:"email"}),t.email&&n.email?(0,a.jsx)("p",{className:"pl-4 text-sm text-red-500",children:t.email}):null]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(p.gN,{placeholder:"Phone",className:"w-full px-4 py-2 border rounded-full focus:outline-none",name:"number"}),t.number&&(0,a.jsx)("p",{className:"pl-4 text-sm text-red-500",children:t.number})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(p.gN,{placeholder:"First Name",className:"w-full px-4 py-2 border rounded-full focus:outline-none",name:"firstName"}),t.firstName&&(0,a.jsx)("p",{className:"pl-4 text-sm text-red-500",children:t.firstName})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(p.gN,{placeholder:"Last Name",className:"w-full px-4 py-2 border rounded-full focus:outline-none",name:"lastName"}),t.lastName&&(0,a.jsx)("p",{className:"pl-4 text-sm text-red-500",children:t.lastName})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(p.gN,{placeholder:"Address",className:"w-full px-4 py-2 border rounded-full focus:outline-none",name:"address"}),t.address&&(0,a.jsx)("p",{className:"pl-4 text-sm text-red-500",children:t.address})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(p.gN,{placeholder:"City",className:"w-full px-4 py-2 border rounded-full focus:outline-none",name:"city"}),t.city&&(0,a.jsx)("p",{className:"pl-4 text-sm text-red-500",children:t.city})]})]})]}),(0,a.jsxs)("div",{className:"mt-8 lg:mt-0",children:[(0,a.jsx)("p",{children:"Your Cart"}),(0,a.jsx)("div",{className:"flex flex-col items-center justify-between w-full mt-4 space-y-3",children:r.length?r.map((function(e,r){return(0,a.jsxs)("div",{className:"flex items-center w-full gap-4",children:[(0,a.jsx)("div",{className:"relative w-10 h-10 overflow-hidden rounded-full",children:(0,a.jsx)(o(),{src:"https://images.unsplash.com/photo-1599643478518-a784e5dc4c8f?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80",layout:"fill",objectFit:"cover",alt:"img"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold shrink-1",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-400 font-semibild shrink-1",children:e.code})]})]},r)})):i?(0,a.jsx)(f.Z,{load:i}):(0,a.jsx)("p",{children:"no item"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 mt-4",children:[(0,a.jsx)(c(),{href:u.bQ,children:(0,a.jsx)("a",{className:"px-8 py-2 text-sm font-bold text-black uppercase bg-white border rounded-full",children:"Continue shopping"})}),(0,a.jsx)("button",{type:"submit",disabled:s,className:"px-8 py-2 text-sm font-bold text-black uppercase bg-orange-400 rounded-full",children:"Make order"})]})]})})}})}}},function(e){e.O(0,[294,774,888,179],(function(){return r=6302,e(e.s=r);var r}));var r=e.O();_N_E=r}]);